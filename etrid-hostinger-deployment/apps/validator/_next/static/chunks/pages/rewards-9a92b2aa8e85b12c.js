(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{2197:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rewards",function(){return t(9869)}])},9869:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return D}});var a=t(5893),r=t(7294),l=t(9008),d=t.n(l),n=t(2637),i=t(3627),c=t(2779),x=t(2609),o=t(437),m=t(3488),h=t(3346),p=t(9289),j=t(723),g=t(7017),u=t(5615),y=t(8793),w=t(4570),N=t(8042),f=t(1712),b=t(4520),v=t(5400),k=t(9984),R=t(1536),E=t(4715),T=t(3454);function D(){let[e]=(0,r.useState)(T.env.NEXT_PUBLIC_VALIDATOR_ADDRESS),{isConnected:s,isLoading:t,rewards:l}=(0,i.s)(e),[D,C]=(0,r.useState)("30d"),[_,S]=(0,r.useState)("area"),B=(0,r.useMemo)(()=>{let e=Date.now(),s={"7d":6048e5,"30d":2592e6,"90d":7776e6,all:1/0};return l.filter(t=>e-t.timestamp<=s[D]).sort((e,s)=>e.timestamp-s.timestamp)},[l,D]),K=(0,r.useMemo)(()=>{let e=B.reduce((e,s)=>e+s.amount,BigInt(0)),s=B.length>0?e/BigInt(B.length):BigInt(0);return{totalRewards:e,averageReward:s,totalEras:B.length,latestReward:B.length>0?B[B.length-1].amount:BigInt(0)}},[B]),Z=e=>(Number(e)/1e18).toFixed(4),M=B.map(e=>({era:e.era,amount:Number(e.amount)/1e18,timestamp:e.timestamp,date:(0,p.Z)(new Date(e.timestamp),"MMM dd"),commission:e.commission}));return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(d(),{children:[(0,a.jsx)("title",{children:"Rewards - Validator Dashboard"}),(0,a.jsx)("meta",{name:"description",content:"Track your validator rewards and earnings"})]}),(0,a.jsx)(n.Z,{isConnected:s,onConnectWallet:()=>{console.log("Connect wallet")},children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Rewards Tracker"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"View and analyze your validator rewards over time"})]}),(0,a.jsxs)("button",{onClick:()=>{let e=new Blob([["Era,Amount (ETR),Date,Nominators,Commission (%)",...B.map(e=>[e.era,Z(e.amount),new Date(e.timestamp).toISOString(),e.nominators,e.commission].join(","))].join("\n")],{type:"text/csv"}),s=window.URL.createObjectURL(e),t=document.createElement("a");t.href=s,t.download="rewards-".concat(Date.now(),".csv"),t.click()},className:"flex items-center space-x-2 px-4 py-2 bg-etrid-600 text-white rounded-lg hover:bg-etrid-700 transition-colors",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Export Data"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Rewards"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Z(K.totalRewards)}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"ETR"})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-etrid-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-6 h-6 text-etrid-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Average Reward"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Z(K.averageReward)}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"ETR per era"})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(o.Z,{className:"w-6 h-6 text-purple-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Latest Reward"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:Z(K.latestReward)}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"ETR"})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-success-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(m.Z,{className:"w-6 h-6 text-success-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Eras Tracked"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:K.totalEras}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Total eras"})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-warning-100 rounded-lg flex items-center justify-center",children:(0,a.jsx)(h.Z,{className:"w-6 h-6 text-warning-600"})})]})})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 font-medium",children:"Time Range:"}),(0,a.jsx)("div",{className:"flex space-x-2",children:["7d","30d","90d","all"].map(e=>(0,a.jsx)("button",{onClick:()=>C(e),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(D===e?"bg-etrid-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"all"===e?"All Time":e.toUpperCase()},e))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-sm text-gray-600 font-medium",children:"Chart Type:"}),(0,a.jsx)("div",{className:"flex space-x-2",children:["line","area","bar"].map(e=>(0,a.jsx)("button",{onClick:()=>S(e),className:"px-4 py-2 rounded-lg text-sm font-medium capitalize transition-colors ".concat(_===e?"bg-etrid-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e},e))})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Rewards History"}),t?(0,a.jsx)("div",{className:"flex justify-center items-center h-80",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-etrid-600 border-t-transparent rounded-full animate-spin"})}):0===M.length?(0,a.jsx)("div",{className:"flex justify-center items-center h-80 text-gray-500",children:"No reward data available for the selected time range"}):(0,a.jsx)(E.h,{width:"100%",height:400,children:(()=>{let e={data:M,margin:{top:5,right:30,left:20,bottom:5}},s=e=>{let{active:s,payload:t}=e;return s&&t&&t.length?(0,a.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-lg border border-gray-200",children:[(0,a.jsxs)("p",{className:"text-sm font-semibold text-gray-900",children:["Era ",t[0].payload.era]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:t[0].payload.date}),(0,a.jsxs)("p",{className:"text-sm font-bold text-etrid-600 mt-2",children:[t[0].value.toFixed(4)," ETR"]})]}):null};switch(_){case"line":return(0,a.jsxs)(j.w,{...e,children:[(0,a.jsx)(g.q,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,a.jsx)(u.K,{dataKey:"date",stroke:"#6b7280"}),(0,a.jsx)(y.B,{stroke:"#6b7280"}),(0,a.jsx)(w.u,{content:s}),(0,a.jsx)(N.D,{}),(0,a.jsx)(f.x,{type:"monotone",dataKey:"amount",stroke:"#0ea5e9",strokeWidth:2,dot:{fill:"#0ea5e9",r:4},activeDot:{r:6},name:"Rewards (ETR)"})]});case"area":return(0,a.jsxs)(b.T,{...e,children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"colorRewards",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#0ea5e9",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#0ea5e9",stopOpacity:.1})]})}),(0,a.jsx)(g.q,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,a.jsx)(u.K,{dataKey:"date",stroke:"#6b7280"}),(0,a.jsx)(y.B,{stroke:"#6b7280"}),(0,a.jsx)(w.u,{content:s}),(0,a.jsx)(N.D,{}),(0,a.jsx)(v.u,{type:"monotone",dataKey:"amount",stroke:"#0ea5e9",strokeWidth:2,fillOpacity:1,fill:"url(#colorRewards)",name:"Rewards (ETR)"})]});case"bar":return(0,a.jsxs)(k.v,{...e,children:[(0,a.jsx)(g.q,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),(0,a.jsx)(u.K,{dataKey:"date",stroke:"#6b7280"}),(0,a.jsx)(y.B,{stroke:"#6b7280"}),(0,a.jsx)(w.u,{content:s}),(0,a.jsx)(N.D,{}),(0,a.jsx)(R.$,{dataKey:"amount",fill:"#0ea5e9",name:"Rewards (ETR)"})]})}})()})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Rewards"})}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Era"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nominators"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Commission"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-200",children:t?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center",children:(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)("div",{className:"w-8 h-8 border-4 border-etrid-600 border-t-transparent rounded-full animate-spin"})})})}):0===B.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:5,className:"px-6 py-12 text-center text-gray-500",children:"No rewards data available"})}):B.slice().reverse().slice(0,20).map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-etrid-100 text-etrid-800",children:["Era ",e.era]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsx)("p",{className:"text-sm text-gray-900",children:(0,p.Z)(new Date(e.timestamp),"MMM dd, yyyy")}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:(0,p.Z)(new Date(e.timestamp),"HH:mm:ss")})]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("p",{className:"text-sm font-semibold text-gray-900",children:[Z(e.amount)," ETR"]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("p",{className:"text-sm text-gray-900",children:e.nominators})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("p",{className:"text-sm text-gray-900",children:[e.commission,"%"]})})]},e.era))})]})}),B.length>20&&(0,a.jsx)("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing 20 most recent of ",B.length," rewards"]})})]})]})})]})}}},function(e){e.O(0,[845,454,27,637,186,241,888,774,179],function(){return e(e.s=2197)}),_N_E=e.O()}]);