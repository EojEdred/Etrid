<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>File Integrity Checker</title>
    <style>
        body {
            font-family: monospace;
            background: #0a0e1a;
            color: #e0e0e0;
            padding: 30px;
            line-height: 1.8;
        }
        h1 { color: #3B82F6; }
        .check { padding: 15px; margin: 10px 0; border-radius: 5px; }
        .pass { background: #064e3b; border-left: 5px solid #10b981; }
        .fail { background: #7f1d1d; border-left: 5px solid #ef4444; }
        .warn { background: #78350f; border-left: 5px solid #f59e0b; }
        code { background: #1a1f2e; padding: 2px 6px; border-radius: 3px; color: #60a5fa; }
        .result { font-size: 18px; font-weight: bold; margin-top: 20px; }
    </style>
</head>
<body>
    <h1>üîç FILE INTEGRITY CHECKER</h1>
    <p>Checking if viewer-standalone.html uploaded correctly...</p>

    <div id="results"></div>

    <script>
        const results = [];

        function addResult(message, type) {
            results.push({ message, type });
        }

        // Check 1: Is marked.js loaded?
        if (typeof marked !== 'undefined') {
            addResult('‚úì Step 1/3: marked.js library is loaded (v' + (marked.version || 'unknown') + ')', 'pass');
        } else {
            addResult('‚úó Step 1/3: marked.js library NOT loaded - file is corrupted or truncated', 'fail');
        }

        // Check 2: Fetch the viewer file and check its size
        fetch('viewer-standalone.html')
            .then(response => {
                if (!response.ok) {
                    throw new Error('File not found');
                }
                return response.blob();
            })
            .then(blob => {
                const size = blob.size;
                addResult('‚úì Step 2/3: viewer-standalone.html exists', 'pass');

                // Expected size: 224,407 bytes
                if (size === 224407) {
                    addResult('‚úì Step 3/3: File size is PERFECT: ' + size.toLocaleString() + ' bytes', 'pass');
                    addResult('<strong class="result" style="color: #10b981;">‚úì FILE IS CORRECT!</strong><br><br>The file uploaded correctly. If the viewer still shows "Loading content...", the problem is with JavaScript execution.<br><br><strong>Next steps:</strong><br>1. Clear your browser cache (Cmd+Shift+R or Ctrl+F5)<br>2. Try incognito/private window<br>3. Try different browser<br>4. Check browser console (F12) for JavaScript errors', 'pass');
                } else if (size < 224407) {
                    const missing = 224407 - size;
                    addResult('‚úó Step 3/3: File size is TOO SMALL: ' + size.toLocaleString() + ' bytes (expected 224,407)<br>Missing: ' + missing.toLocaleString() + ' bytes', 'fail');
                    addResult('<strong class="result" style="color: #ef4444;">‚úó FILE WAS TRUNCATED DURING UPLOAD</strong><br><br>The file uploaded incompletely. The JavaScript code at the end is missing.<br><br><strong>This is why it shows "Loading content..." - the code to load content never uploaded!</strong><br><br><strong>FIX:</strong><br>1. Delete viewer-standalone.html from server<br>2. Re-upload using FTP client in BINARY mode<br>3. If using Hostinger File Manager, try uploading via FTP instead<br>4. After upload, run this checker again to verify', 'fail');
                } else {
                    addResult('‚ö† Step 3/3: File size is LARGER: ' + size.toLocaleString() + ' bytes (expected 224,407)<br>Extra: ' + (size - 224407).toLocaleString() + ' bytes', 'warn');
                    addResult('<strong class="result" style="color: #f59e0b;">‚ö† FILE SIZE MISMATCH</strong><br><br>The file is larger than expected. You might have uploaded a different version.<br><br><strong>FIX:</strong><br>1. Make sure you\'re uploading from: <code>/whitepaper 2/viewer-standalone.html</code><br>2. Check the file size on your computer (should be 224,407 bytes)<br>3. Re-upload the correct file', 'warn');
                }

                displayResults();
            })
            .catch(error => {
                addResult('‚úó Step 2/3: Cannot fetch viewer-standalone.html: ' + error.message, 'fail');
                addResult('<strong class="result" style="color: #ef4444;">‚úó FILE NOT FOUND OR NOT ACCESSIBLE</strong><br><br><strong>Possible issues:</strong><br>1. File not uploaded yet<br>2. File in wrong directory<br>3. File permissions incorrect<br><br><strong>FIX:</strong><br>Upload viewer-standalone.html to the same directory as this checker file.', 'fail');
                displayResults();
            });

        function displayResults() {
            const html = results.map(r =>
                `<div class="check ${r.type}">${r.message}</div>`
            ).join('');

            document.getElementById('results').innerHTML = html;
        }

        // Display initial results (marked.js check)
        displayResults();
    </script>
</body>
</html>
