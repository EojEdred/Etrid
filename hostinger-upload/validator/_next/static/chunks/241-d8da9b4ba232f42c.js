(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[241],{2637:function(e,t,a){"use strict";a.d(t,{Z:function(){return y}});var s=a(5893),r=a(7294),n=a(1664),l=a.n(n),i=a(1163),o=a(8979),c=a(2217),d=a(9176),u=a(3488),m=a(5264),h=a(2190),x=a(8497),g=a(2203),f=a(2658),N=a(7918);function y(e){let{children:t,isConnected:a=!1,onConnectWallet:n}=e,y=(0,i.useRouter)(),[v,b]=r.useState(!1),w=[{name:"Dashboard",href:"/",icon:o.Z},{name:"Performance",href:"/performance",icon:c.Z},{name:"Nominators",href:"/nominators",icon:d.Z},{name:"Rewards",href:"/rewards",icon:u.Z},{name:"Settings",href:"/settings",icon:m.Z}],k=e=>y.pathname===e;return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("header",{className:"bg-white shadow-sm sticky top-0 z-40",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("button",{onClick:()=>b(!v),className:"lg:hidden p-2 rounded-md text-gray-600 hover:text-gray-900 hover:bg-gray-100",children:v?(0,s.jsx)(h.Z,{className:"w-6 h-6"}):(0,s.jsx)(x.Z,{className:"w-6 h-6"})}),(0,s.jsxs)(l(),{href:"/",className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-etrid-500 to-etrid-700 rounded-lg flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-bold text-lg",children:"\xcb"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"\xcbtrid Validator"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Dashboard"})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[a?(0,s.jsx)(g.Z,{className:"w-5 h-5 text-success-500"}):(0,s.jsx)(f.Z,{className:"w-5 h-5 text-danger-500"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:a?"Connected":"Disconnected"})]}),!a&&n&&(0,s.jsx)("button",{onClick:n,className:"px-4 py-2 bg-etrid-600 text-white rounded-lg hover:bg-etrid-700 transition-colors font-medium text-sm",children:"Connect Wallet"}),(0,s.jsxs)("button",{className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:[(0,s.jsx)(N.Z,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"absolute top-1 right-1 w-2 h-2 bg-danger-500 rounded-full"})]})]})]})})}),v&&(0,s.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 z-30 lg:hidden",onClick:()=>b(!1)}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("aside",{className:"fixed inset-y-0 left-0 z-30 w-64 bg-white shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-auto ".concat(v?"translate-x-0":"-translate-x-full"," top-16"),children:(0,s.jsx)("nav",{className:"p-4 space-y-2",children:w.map(e=>{let t=e.icon,a=k(e.href);return(0,s.jsxs)(l(),{href:e.href,className:"flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ".concat(a?"bg-etrid-50 text-etrid-700 font-semibold":"text-gray-700 hover:bg-gray-100"),onClick:()=>b(!1),children:[(0,s.jsx)(t,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:e.name})]},e.name)})})}),(0,s.jsx)("main",{className:"flex-1 p-4 lg:p-8",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto",children:t})})]}),(0,s.jsx)("footer",{className:"bg-white border-t border-gray-200 mt-12",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"\xa9 2024 \xcbtrid Protocol. All rights reserved."}),(0,s.jsxs)("div",{className:"flex space-x-6 text-sm text-gray-600",children:[(0,s.jsx)("a",{href:"#",className:"hover:text-etrid-600",children:"Documentation"}),(0,s.jsx)("a",{href:"#",className:"hover:text-etrid-600",children:"Support"}),(0,s.jsx)("a",{href:"#",className:"hover:text-etrid-600",children:"GitHub"})]})]})})})]})}},3627:function(e,t,a){"use strict";a.d(t,{s:function(){return i}});var s=a(7294),r=a(7152),n=a(4071);let l=a(3454).env.NEXT_PUBLIC_WS_PROVIDER||"ws://localhost:9944";function i(e){let[t,a]=(0,s.useState)(null),[i,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(!0),[u,m]=(0,s.useState)(null),[h,x]=(0,s.useState)(null),[g,f]=(0,s.useState)([]),[N,y]=(0,s.useState)([]),[v,b]=(0,s.useState)(null),[w,k]=(0,s.useState)(null),[p,j]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=!0,t=null;return(async()=>{try{d(!0);let s=new r.U(l);t=await n.G.create({provider:s}),e&&(a(t),o(!0),m(null))}catch(t){e&&(m(t instanceof Error?t.message:"Failed to connect to node"),o(!1))}finally{e&&d(!1)}})(),()=>{e=!1,t&&t.disconnect()}},[]);let S=(0,s.useCallback)(async()=>{if(t&&e)try{var a;let[s,r,n]=await Promise.all([t.query.staking.ledger(e),t.query.staking.validators(e),t.query.session.nextKeys(e)]),l=await t.query.staking.erasStakers(await t.query.staking.currentEra(),e),i=s.toJSON(),o=n.toJSON(),c=r.toJSON(),d=l.toJSON(),u={address:e,stash:e,controller:(null==i?void 0:i.controller)||"",sessionKeys:o||"",commission:(null==c?void 0:c.commission)?Number(c.commission)/1e7:0,totalStake:BigInt((null==d?void 0:d.total)||0),ownStake:BigInt((null==d?void 0:d.own)||0),nominatorCount:(null==d?void 0:null===(a=d.others)||void 0===a?void 0:a.length)||0,isActive:!0,isElected:!0,isBlocking:(null==c?void 0:c.blocked)||!1,eraPoints:0,lastBlockProduced:0,uptime:99.9};x(u)}catch(e){console.error("Error fetching validator info:",e)}},[t,e]),E=(0,s.useCallback)(async()=>{if(t&&e)try{let a=await t.query.staking.currentEra(),s=(await t.query.staking.erasStakers(a,e)).toJSON(),r=((null==s?void 0:s.others)||[]).map(e=>({address:e.who||"",stake:BigInt(e.value||0),active:!0,since:Date.now()-2592e6*Math.random(),lastReward:BigInt(Math.floor(1e18*Math.random()))}));f(r.sort((e,t)=>e.stake>t.stake?-1:1))}catch(e){console.error("Error fetching nominators:",e)}},[t,e]),C=(0,s.useCallback)(async()=>{if(t&&e)try{let e=(await t.query.staking.currentEra()).toJSON(),a=Number(e||0),s=[];for(let e=0;e<30&&a-e>=0;e++){let r=a-e,n=(await t.query.staking.erasValidatorReward(r)).toJSON();n&&s.push({era:r,amount:BigInt(n||0)/BigInt(100),timestamp:Date.now()-216e5*e,nominators:Math.floor(50*Math.random())+10,commission:5})}y(s)}catch(e){console.error("Error fetching rewards:",e)}},[t,e]),O=(0,s.useCallback)(async()=>{if(t&&e)try{var a;let s=await t.query.staking.currentEra(),r=(await t.query.staking.erasRewardPoints(s)).toJSON(),n=Number((null==r?void 0:null===(a=r.individual)||void 0===a?void 0:a[e])||0);null==r||r.total;let l=Object.keys((null==r?void 0:r.individual)||{}).length,i={blocksProduced:n,missedBlocks:Math.floor(10*Math.random()),uptime:99.9,averageBlockTime:6,eraPoints:n,rank:Object.values((null==r?void 0:r.individual)||{}).filter(e=>Number(e)>n).length+1,totalValidators:l};b(i)}catch(e){console.error("Error fetching performance:",e)}},[t,e]),q=(0,s.useCallback)(async()=>{if(t)try{let[e,a,s,r]=await Promise.all([t.query.session.currentIndex(),t.query.staking.currentEra(),t.consts.babe.epochDuration,t.consts.staking.sessionsPerEra]),n=Number(e.toJSON()||0),l=Number(a.toJSON()||0),i=Number(s.toJSON()||0),o=Number(r.toJSON()||0),c=n%i/i,d=n%(i*o)/(i*o);k({currentSession:n,currentEra:l,sessionProgress:c,eraProgress:d,sessionLength:i,eraLength:o,timeToNextSession:Math.floor((1-c)*3600),timeToNextEra:Math.floor((1-d)*21600)})}catch(e){console.error("Error fetching session info:",e)}},[t]),B=(0,s.useCallback)(async()=>{if(t)try{let[e,a,s]=await Promise.all([t.query.balances.totalIssuance(),t.query.staking.erasTotalStake(await t.query.staking.currentEra()),t.query.staking.validatorCount()]),r=BigInt(e.toJSON()||0),n=BigInt(a.toJSON()||0),l=Number(s.toJSON()||0),i={totalIssuance:r,totalStaked:n,stakingRate:Number(n)/Number(r),activeValidators:l,waitingValidators:Math.floor(50*Math.random()),minNominatorBond:BigInt("1000000000000000000"),minValidatorBond:BigInt("10000000000000000000"),inflationRate:.1};j(i)}catch(e){console.error("Error fetching network stats:",e)}},[t]),I=(0,s.useCallback)(()=>{t&&i&&(S(),E(),C(),O(),q(),B())},[t,i,S,E,C,O,q,B]);return(0,s.useEffect)(()=>{if(!t||!i)return;I();let e=setInterval(I,3e4);return()=>clearInterval(e)},[t,i,I]),{api:t,isConnected:i,isLoading:c,error:u,validatorInfo:h,nominators:g,rewards:N,performance:v,sessionInfo:w,networkStats:p,refreshData:I}}},6601:function(){}}]);